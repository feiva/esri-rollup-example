define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/widgets/BasemapToggle","esri/widgets/BasemapToggle/BasemapToggleViewModel","dojo/i18n!./nls/strings"],function(e,a,t,n,i,s,l,p,d){function o(e){return e.replace?e.replace(/-|_/g," "):e}e="default"in e?e["default"]:e,a="default"in a?a["default"]:a,t="default"in t?t["default"]:t,n="default"in n?n["default"]:n,i="default"in i?i["default"]:i,s="default"in s?s["default"]:s,l="default"in l?l["default"]:l,p="default"in p?p["default"]:p,d="default"in d?d["default"]:d;var r={mapProps:{center:[-122.33,37.75],zoom:11,basemap:"dark-gray"},secondaryBasemap:"streets",fuelingStationLayerProps:{url:"https://services.arcgis.com/rOo16HdIMeOBI4Mb/arcgis/rest/services/Alternative_Fueling_Stations/FeatureServer/0",popupTemplate:{title:"{Station_Na}",content:'\n        <p>{Street_Add}<br>\n        {City}, {State}, {ZIP}</p>\n\n        <p><b>Fuel Type:</b> {Fuel_Type}</p>\n        <p><b>Phone:</b> <a href="tel:{Station_Ph}">{Station_Ph}</a></p>\n        <p><b>Open to:</b> {Groups_Wit}</p>\n        <p><b>Hours:</b> {Access_Day}</p>'},outFields:["Station_Na","Street_Add","City","State","ZIP","Fuel_Type","Station_Ph","Groups_Wit","Access_Day"]}},u=e([],{init:function(e){this.map=new n({basemap:e.basemap}),delete e.basemap,e.map=this.map,this.view=new i(e)},createBasemapToggle:function(e,a){return e&&a&&this.view?new l({viewModel:new p({view:this.view,secondaryBasemap:a})},e):void 0},addFeatureLayer:function(e){if(this.map){var a=new s(e);return this.map.add(a),a}}});if(!c)var c=new u;var g='<div class="panel panel-default">\r\n  <div class="panel-heading">\r\n    <h4 class="panel-title">\r\n      <a role="button" data-toggle="collapse" data-dojo-attach-point="titleNode" data-target=".info-panel" aria-expanded="false" aria-controls="collapseOne"></a>\r\n    </h4>\r\n  </div>\r\n  <div class="panel-collapse collapse in info-panel" role="tabpanel">\r\n    <div class="panel-body">\r\n      <h4><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span> ${nls.About}</h4>\r\n      <p>${nls.sidePanelMessage}</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n',f=e([a,t],{baseClass:"side-panel",nls:d,templateString:g,_setTitleAttr:{node:"titleNode",type:"innerHTML"}}),h=e([a,t],{baseClass:"app",templateString:'\n    <div>\n      <div data-dojo-attach-point="mapNode" class="map-container">\n        <div data-dojo-attach-point="sidePanelNode"></div>\n        <div data-dojo-attach-point="basemapToggleNode" class="basemap-toggle" />\n      </div>\n    </div>\n  ',postCreate:function(){var e=this;this.inherited(arguments),r.mapProps.container=this.mapNode,c.init(r.mapProps),this.sidePanel=new f({},this.sidePanelNode),this.basemapToggle=c.createBasemapToggle(this.basemapToggleNode,r.secondaryBasemap),c.addFeatureLayer(r.fuelingStationLayerProps).then(function(a){e.sidePanel.set("title",o(a.title||a.name))})},startup:function(){this.sidePanel.startup(),this.basemapToggle.startup()}});window.app=new h({},"app"),window.app.startup()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJkZWNsYXJlIiwiX1dpZGdldEJhc2UiLCJfVGVtcGxhdGVkTWl4aW4iLCJNYXAiLCJNYXBWaWV3IiwiRmVhdHVyZUxheWVyIiwiQmFzZW1hcFRvZ2dsZSIsIkJhc2VtYXBUb2dnbGVWTSIsInN0cmluZ3MiLCJmb3JtYXRUaXRsZSIsInRpdGxlIiwicmVwbGFjZSIsImNvbmZpZyIsIm1hcFByb3BzIiwiY2VudGVyIiwiem9vbSIsImJhc2VtYXAiLCJzZWNvbmRhcnlCYXNlbWFwIiwiZnVlbGluZ1N0YXRpb25MYXllclByb3BzIiwidXJsIiwicG9wdXBUZW1wbGF0ZSIsImNvbnRlbnQiLCJvdXRGaWVsZHMiLCJNYXBTZXJ2aWNlIiwiaW5pdCIsIm9wdGlvbnMiLCJ0aGlzIiwibWFwIiwidmlldyIsImNyZWF0ZUJhc2VtYXBUb2dnbGUiLCJub2RlIiwidmlld01vZGVsIiwiYWRkRmVhdHVyZUxheWVyIiwicHJvcHMiLCJmZWF0dXJlTGF5ZXIiLCJhZGQiLCJfaW5zdGFuY2UiLCJ0ZW1wbGF0ZSIsIlNpZGVQYW5lbCIsImJhc2VDbGFzcyIsIm5scyIsInRlbXBsYXRlU3RyaW5nIiwiX3NldFRpdGxlQXR0ciIsInR5cGUiLCJBcHAiLCJwb3N0Q3JlYXRlIiwiX3RoaXMiLCJpbmhlcml0ZWQiLCJhcmd1bWVudHMiLCJjb250YWluZXIiLCJtYXBOb2RlIiwic2lkZVBhbmVsIiwic2lkZVBhbmVsTm9kZSIsImJhc2VtYXBUb2dnbGUiLCJiYXNlbWFwVG9nZ2xlTm9kZSIsInRoZW4iLCJsYXllciIsInNldCIsIm5hbWUiLCJzdGFydHVwIiwid2luZG93IiwiYXBwIl0sIm1hcHBpbmdzIjoiQUFBQUEsUUFBUSxxQkFBc0Isb0JBQXFCLHdCQUF5QixXQUFZLHFCQUFzQiwyQkFBNEIsNkJBQThCLG9EQUFxRCwyQkFBNEIsU0FBVUMsRUFBU0MsRUFBYUMsRUFBaUJDLEVBQUtDLEVBQVNDLEVBQWNDLEVBQWVDLEVBQWlCQyxHQXdGcFcsUUFBU0MsR0FBWUMsR0FDbkIsTUFBS0EsR0FBTUMsUUFNSkQsRUFBTUMsUUFBUSxPQUFRLEtBSnBCRCxFQXpGWFYsRUFBVSxXQUFhQSxHQUFVQSxFQUFRLFdBQWFBLEVBQ3REQyxFQUFjLFdBQWFBLEdBQWNBLEVBQVksV0FBYUEsRUFDbEVDLEVBQWtCLFdBQWFBLEdBQWtCQSxFQUFnQixXQUFhQSxFQUM5RUMsRUFBTSxXQUFhQSxHQUFNQSxFQUFJLFdBQWFBLEVBQzFDQyxFQUFVLFdBQWFBLEdBQVVBLEVBQVEsV0FBYUEsRUFDdERDLEVBQWUsV0FBYUEsR0FBZUEsRUFBYSxXQUFhQSxFQUNyRUMsRUFBZ0IsV0FBYUEsR0FBZ0JBLEVBQWMsV0FBYUEsRUFDeEVDLEVBQWtCLFdBQWFBLEdBQWtCQSxFQUFnQixXQUFhQSxFQUM5RUMsRUFBVSxXQUFhQSxHQUFVQSxFQUFRLFdBQWFBLENBRXRELElBQUlJLElBQ0ZDLFVBQ0VDLFFBQVMsUUFBUyxPQUNsQkMsS0FBTSxHQUNOQyxRQUFTLGFBRVhDLGlCQUFrQixVQUNsQkMsMEJBQ0VDLElBQUssaUhBQ0xDLGVBQ0VWLE1BQU8sZUFDUFcsUUFBUyx1UkFFWEMsV0FBWSxhQUFjLGFBQWMsT0FBUSxRQUFTLE1BQU8sWUFBYSxhQUFjLGFBQWMsZ0JBS3pHQyxFQUFhdkIsTUFFZndCLEtBQU0sU0FBY0MsR0FDbEJDLEtBQUtDLElBQU0sR0FBSXhCLElBQ2JhLFFBQVNTLEVBQVFULGdCQUVaUyxHQUFRVCxRQUNmUyxFQUFRRSxJQUFNRCxLQUFLQyxJQUNuQkQsS0FBS0UsS0FBTyxHQUFJeEIsR0FBUXFCLElBRzFCSSxvQkFBcUIsU0FBNkJDLEVBQU1iLEdBQ3RELE1BQUthLElBQVNiLEdBQXFCUyxLQUFLRSxLQUlqQyxHQUFJdEIsSUFHVHlCLFVBQVcsR0FBSXhCLElBQ2JxQixLQUFNRixLQUFLRSxLQUNYWCxpQkFBa0JBLEtBRW5CYSxHQVhILFFBZ0JGRSxnQkFBaUIsU0FBeUJDLEdBQ3hDLEdBQUtQLEtBQUtDLElBQVYsQ0FJQSxHQUFJTyxHQUFlLEdBQUk3QixHQUFhNEIsRUFFcEMsT0FEQVAsTUFBS0MsSUFBSVEsSUFBSUQsR0FDTkEsS0FLWCxLQUFLRSxFQUNILEdBQUlBLEdBQVksR0FBSWIsRUFHdEIsSUFBSWMsR0FBVyxra0JBRVhDLEVBQVl0QyxHQUFTQyxFQUFhQyxJQUVwQ3FDLFVBQVcsYUFDWEMsSUFBS2hDLEVBQ0xpQyxlQUFnQkosRUFHaEJLLGVBQWlCWixLQUFNLFlBQWFhLEtBQU0sZUFleENDLEVBQU01QyxHQUFTQyxFQUFhQyxJQUU5QnFDLFVBQVcsTUFFWEUsZUFBZ0IsK1BBR2hCSSxXQUFZLFdBQ1YsR0FBSUMsR0FBUXBCLElBRVpBLE1BQUtxQixVQUFVQyxXQUdmcEMsRUFBT0MsU0FBU29DLFVBQVl2QixLQUFLd0IsUUFDakNkLEVBQVVaLEtBQUtaLEVBQU9DLFVBR3RCYSxLQUFLeUIsVUFBWSxHQUFJYixNQUFjWixLQUFLMEIsZUFHeEMxQixLQUFLMkIsY0FBZ0JqQixFQUFVUCxvQkFBb0JILEtBQUs0QixrQkFBbUIxQyxFQUFPSyxrQkFJbEZtQixFQUFVSixnQkFBZ0JwQixFQUFPTSwwQkFBMEJxQyxLQUFLLFNBQVVDLEdBQ3hFVixFQUFNSyxVQUFVTSxJQUFJLFFBQVNoRCxFQUFZK0MsRUFBTTlDLE9BQVM4QyxFQUFNRSxVQU1sRUMsUUFBUyxXQUNQakMsS0FBS3lCLFVBQVVRLFVBQ2ZqQyxLQUFLMkIsY0FBY00sWUFLdkJDLFFBQU9DLElBQU0sR0FBSWpCLE1BQVEsT0FDekJnQixPQUFPQyxJQUFJRiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJkZWZpbmUoWydkb2pvL19iYXNlL2RlY2xhcmUnLCAnZGlqaXQvX1dpZGdldEJhc2UnLCAnZGlqaXQvX1RlbXBsYXRlZE1peGluJywgJ2VzcmkvTWFwJywgJ2Vzcmkvdmlld3MvTWFwVmlldycsICdlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXInLCAnZXNyaS93aWRnZXRzL0Jhc2VtYXBUb2dnbGUnLCAnZXNyaS93aWRnZXRzL0Jhc2VtYXBUb2dnbGUvQmFzZW1hcFRvZ2dsZVZpZXdNb2RlbCcsICdkb2pvL2kxOG4hLi9ubHMvc3RyaW5ncyddLCBmdW5jdGlvbiAoZGVjbGFyZSwgX1dpZGdldEJhc2UsIF9UZW1wbGF0ZWRNaXhpbiwgTWFwLCBNYXBWaWV3LCBGZWF0dXJlTGF5ZXIsIEJhc2VtYXBUb2dnbGUsIEJhc2VtYXBUb2dnbGVWTSwgc3RyaW5ncykgeyBcblxuICBkZWNsYXJlID0gJ2RlZmF1bHQnIGluIGRlY2xhcmUgPyBkZWNsYXJlWydkZWZhdWx0J10gOiBkZWNsYXJlO1xuICBfV2lkZ2V0QmFzZSA9ICdkZWZhdWx0JyBpbiBfV2lkZ2V0QmFzZSA/IF9XaWRnZXRCYXNlWydkZWZhdWx0J10gOiBfV2lkZ2V0QmFzZTtcbiAgX1RlbXBsYXRlZE1peGluID0gJ2RlZmF1bHQnIGluIF9UZW1wbGF0ZWRNaXhpbiA/IF9UZW1wbGF0ZWRNaXhpblsnZGVmYXVsdCddIDogX1RlbXBsYXRlZE1peGluO1xuICBNYXAgPSAnZGVmYXVsdCcgaW4gTWFwID8gTWFwWydkZWZhdWx0J10gOiBNYXA7XG4gIE1hcFZpZXcgPSAnZGVmYXVsdCcgaW4gTWFwVmlldyA/IE1hcFZpZXdbJ2RlZmF1bHQnXSA6IE1hcFZpZXc7XG4gIEZlYXR1cmVMYXllciA9ICdkZWZhdWx0JyBpbiBGZWF0dXJlTGF5ZXIgPyBGZWF0dXJlTGF5ZXJbJ2RlZmF1bHQnXSA6IEZlYXR1cmVMYXllcjtcbiAgQmFzZW1hcFRvZ2dsZSA9ICdkZWZhdWx0JyBpbiBCYXNlbWFwVG9nZ2xlID8gQmFzZW1hcFRvZ2dsZVsnZGVmYXVsdCddIDogQmFzZW1hcFRvZ2dsZTtcbiAgQmFzZW1hcFRvZ2dsZVZNID0gJ2RlZmF1bHQnIGluIEJhc2VtYXBUb2dnbGVWTSA/IEJhc2VtYXBUb2dnbGVWTVsnZGVmYXVsdCddIDogQmFzZW1hcFRvZ2dsZVZNO1xuICBzdHJpbmdzID0gJ2RlZmF1bHQnIGluIHN0cmluZ3MgPyBzdHJpbmdzWydkZWZhdWx0J10gOiBzdHJpbmdzO1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgbWFwUHJvcHM6IHtcbiAgICAgIGNlbnRlcjogWy0xMjIuMzMsIDM3Ljc1XSxcbiAgICAgIHpvb206IDExLFxuICAgICAgYmFzZW1hcDogJ2RhcmstZ3JheSdcbiAgICB9LFxuICAgIHNlY29uZGFyeUJhc2VtYXA6ICdzdHJlZXRzJyxcbiAgICBmdWVsaW5nU3RhdGlvbkxheWVyUHJvcHM6IHtcbiAgICAgIHVybDogJ2h0dHBzOi8vc2VydmljZXMuYXJjZ2lzLmNvbS9yT28xNkhkSU1lT0JJNE1iL2FyY2dpcy9yZXN0L3NlcnZpY2VzL0FsdGVybmF0aXZlX0Z1ZWxpbmdfU3RhdGlvbnMvRmVhdHVyZVNlcnZlci8wJyxcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgdGl0bGU6ICd7U3RhdGlvbl9OYX0nLFxuICAgICAgICBjb250ZW50OiAnXFxuICAgICAgICA8cD57U3RyZWV0X0FkZH08YnI+XFxuICAgICAgICB7Q2l0eX0sIHtTdGF0ZX0sIHtaSVB9PC9wPlxcblxcbiAgICAgICAgPHA+PGI+RnVlbCBUeXBlOjwvYj4ge0Z1ZWxfVHlwZX08L3A+XFxuICAgICAgICA8cD48Yj5QaG9uZTo8L2I+IDxhIGhyZWY9XCJ0ZWw6e1N0YXRpb25fUGh9XCI+e1N0YXRpb25fUGh9PC9hPjwvcD5cXG4gICAgICAgIDxwPjxiPk9wZW4gdG86PC9iPiB7R3JvdXBzX1dpdH08L3A+XFxuICAgICAgICA8cD48Yj5Ib3Vyczo8L2I+IHtBY2Nlc3NfRGF5fTwvcD4nXG4gICAgICB9LFxuICAgICAgb3V0RmllbGRzOiBbJ1N0YXRpb25fTmEnLCAnU3RyZWV0X0FkZCcsICdDaXR5JywgJ1N0YXRlJywgJ1pJUCcsICdGdWVsX1R5cGUnLCAnU3RhdGlvbl9QaCcsICdHcm91cHNfV2l0JywgJ0FjY2Vzc19EYXknXVxuICAgIH1cbiAgfTtcblxuICAvLyBkZWZpbmUgYSBzdGF0ZWZ1bCBzZXJ2aWNlIHRvIG1hbmFnZSB0aGUgbWFwXG4gIHZhciBNYXBTZXJ2aWNlID0gZGVjbGFyZShbXSwge1xuICAgIC8vIGNyZWF0ZSBhIG1hcCBhbmQgbWFwIHZpZXdcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgICAgIHRoaXMubWFwID0gbmV3IE1hcCh7XG4gICAgICAgIGJhc2VtYXA6IG9wdGlvbnMuYmFzZW1hcFxuICAgICAgfSk7XG4gICAgICBkZWxldGUgb3B0aW9ucy5iYXNlbWFwO1xuICAgICAgb3B0aW9ucy5tYXAgPSB0aGlzLm1hcDtcbiAgICAgIHRoaXMudmlldyA9IG5ldyBNYXBWaWV3KG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICBjcmVhdGVCYXNlbWFwVG9nZ2xlOiBmdW5jdGlvbiBjcmVhdGVCYXNlbWFwVG9nZ2xlKG5vZGUsIHNlY29uZGFyeUJhc2VtYXApIHtcbiAgICAgIGlmICghbm9kZSB8fCAhc2Vjb25kYXJ5QmFzZW1hcCB8fCAhdGhpcy52aWV3KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCYXNlbWFwVG9nZ2xlKHtcbiAgICAgICAgLy8gU2V0dGluZyB3aWRnZXQgcHJvcGVydGllcyB2aWEgdmlld01vZGVsIGlzIHN1YmplY3QgdG9cbiAgICAgICAgLy8gY2hhbmdlIGZvciB0aGUgNC4wIGZpbmFsIHJlbGVhc2VcbiAgICAgICAgdmlld01vZGVsOiBuZXcgQmFzZW1hcFRvZ2dsZVZNKHtcbiAgICAgICAgICB2aWV3OiB0aGlzLnZpZXcsXG4gICAgICAgICAgc2Vjb25kYXJ5QmFzZW1hcDogc2Vjb25kYXJ5QmFzZW1hcFxuICAgICAgICB9KVxuICAgICAgfSwgbm9kZSk7XG4gICAgfSxcblxuXG4gICAgLy8gYWRkIGEgZmVhdHVyZSBsYXllciB0byB0aGUgbWFwXG4gICAgYWRkRmVhdHVyZUxheWVyOiBmdW5jdGlvbiBhZGRGZWF0dXJlTGF5ZXIocHJvcHMpIHtcbiAgICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmVhdHVyZUxheWVyID0gbmV3IEZlYXR1cmVMYXllcihwcm9wcyk7XG4gICAgICB0aGlzLm1hcC5hZGQoZmVhdHVyZUxheWVyKTtcbiAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXI7XG4gICAgfVxuICB9KTtcblxuICAvLyByZXR1cm4gYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhpcyBzZXJ2aWNlXG4gIGlmICghX2luc3RhbmNlKSB7XG4gICAgdmFyIF9pbnN0YW5jZSA9IG5ldyBNYXBTZXJ2aWNlKCk7XG4gIH1cblxuICB2YXIgdGVtcGxhdGUgPSBcIjxkaXYgY2xhc3M9XFxcInBhbmVsIHBhbmVsLWRlZmF1bHRcXFwiPlxcclxcbiAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxyXFxuICAgIDxoNCBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPlxcclxcbiAgICAgIDxhIHJvbGU9XFxcImJ1dHRvblxcXCIgZGF0YS10b2dnbGU9XFxcImNvbGxhcHNlXFxcIiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVxcXCJ0aXRsZU5vZGVcXFwiIGRhdGEtdGFyZ2V0PVxcXCIuaW5mby1wYW5lbFxcXCIgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiIGFyaWEtY29udHJvbHM9XFxcImNvbGxhcHNlT25lXFxcIj48L2E+XFxyXFxuICAgIDwvaDQ+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxkaXYgY2xhc3M9XFxcInBhbmVsLWNvbGxhcHNlIGNvbGxhcHNlIGluIGluZm8tcGFuZWxcXFwiIHJvbGU9XFxcInRhYnBhbmVsXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwicGFuZWwtYm9keVxcXCI+XFxyXFxuICAgICAgPGg0PjxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWluZm8tc2lnblxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj4gJHtubHMuQWJvdXR9PC9oND5cXHJcXG4gICAgICA8cD4ke25scy5zaWRlUGFuZWxNZXNzYWdlfTwvcD5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIjtcblxuICB2YXIgU2lkZVBhbmVsID0gZGVjbGFyZShbX1dpZGdldEJhc2UsIF9UZW1wbGF0ZWRNaXhpbl0sIHtcblxuICAgIGJhc2VDbGFzczogJ3NpZGUtcGFuZWwnLFxuICAgIG5sczogc3RyaW5ncyxcbiAgICB0ZW1wbGF0ZVN0cmluZzogdGVtcGxhdGUsXG5cbiAgICAvLyBzZXQgcGFuZWwgaGVhZGVyIHRpdGxlXG4gICAgX3NldFRpdGxlQXR0cjogeyBub2RlOiAndGl0bGVOb2RlJywgdHlwZTogJ2lubmVySFRNTCcgfVxuICB9KTtcblxuICAvLyBwbGFjZSBzdGF0ZWxlc3MgdXRpbGl0eSBmdW5jdGlvbnMgaW4gdGhpcyBmaWxlXG4gIC8vIHRoZXkgY2FuIGJlIGltcG9ydGVkIGludG8gb3RoZXIgZmlsZXMgYXMgbmVlZGVkXG4gIGZ1bmN0aW9uIGZvcm1hdFRpdGxlKHRpdGxlKSB7XG4gICAgaWYgKCF0aXRsZS5yZXBsYWNlKSB7XG4gICAgICAvLyBub3QgYSBzdHJpbmcsIGp1c3QgcmV0dXJuXG4gICAgICByZXR1cm4gdGl0bGU7XG4gICAgfVxuXG4gICAgLy8gcmVwbGFjZSBkYXNoZXMgYW5kIHVuZGVyc2NvcmVzIHcvIHNwYWNlc1xuICAgIHJldHVybiB0aXRsZS5yZXBsYWNlKC8tfF8vZywgJyAnKTtcbiAgfVxuXG4gIHZhciBBcHAgPSBkZWNsYXJlKFtfV2lkZ2V0QmFzZSwgX1RlbXBsYXRlZE1peGluXSwge1xuXG4gICAgYmFzZUNsYXNzOiAnYXBwJyxcbiAgICAvLyB1c2luZyBhbiBpbmxpbmUgdGVtcGxhdGVcbiAgICB0ZW1wbGF0ZVN0cmluZzogJ1xcbiAgICA8ZGl2PlxcbiAgICAgIDxkaXYgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cIm1hcE5vZGVcIiBjbGFzcz1cIm1hcC1jb250YWluZXJcIj5cXG4gICAgICAgIDxkaXYgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cInNpZGVQYW5lbE5vZGVcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cImJhc2VtYXBUb2dnbGVOb2RlXCIgY2xhc3M9XCJiYXNlbWFwLXRvZ2dsZVwiIC8+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgJyxcblxuICAgIC8vIGtpY2sgb2ZmIGFwcCBvbmNlIHRoaXMgY29tcG9uZW50IGhhcyBiZWVuIGNyZWF0ZWRcbiAgICBwb3N0Q3JlYXRlOiBmdW5jdGlvbiBwb3N0Q3JlYXRlKCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5pbmhlcml0ZWQoYXJndW1lbnRzKTtcblxuICAgICAgLy8gaW5pdGlhbGl6ZSBtYXBcbiAgICAgIGNvbmZpZy5tYXBQcm9wcy5jb250YWluZXIgPSB0aGlzLm1hcE5vZGU7XG4gICAgICBfaW5zdGFuY2UuaW5pdChjb25maWcubWFwUHJvcHMpO1xuXG4gICAgICAvLyBpbml0aWFsaXplIHNpZGUgcGFuZWxcbiAgICAgIHRoaXMuc2lkZVBhbmVsID0gbmV3IFNpZGVQYW5lbCh7fSwgdGhpcy5zaWRlUGFuZWxOb2RlKTtcblxuICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgYmFzZW1hcCB0b2dnbGVcbiAgICAgIHRoaXMuYmFzZW1hcFRvZ2dsZSA9IF9pbnN0YW5jZS5jcmVhdGVCYXNlbWFwVG9nZ2xlKHRoaXMuYmFzZW1hcFRvZ2dsZU5vZGUsIGNvbmZpZy5zZWNvbmRhcnlCYXNlbWFwKTtcblxuICAgICAgLy8gYWRkIGZlYXR1cmUgbGF5ZXIgYW5kIG9uY2UgbG9hZGVkXG4gICAgICAvLyBzZXQgc2lkZSB0aXRsZSBvZiBzaWRlIHBhbmVsXG4gICAgICBfaW5zdGFuY2UuYWRkRmVhdHVyZUxheWVyKGNvbmZpZy5mdWVsaW5nU3RhdGlvbkxheWVyUHJvcHMpLnRoZW4oZnVuY3Rpb24gKGxheWVyKSB7XG4gICAgICAgIF90aGlzLnNpZGVQYW5lbC5zZXQoJ3RpdGxlJywgZm9ybWF0VGl0bGUobGF5ZXIudGl0bGUgfHwgbGF5ZXIubmFtZSkpO1xuICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgLy8geW91IGdvdHRhIHN0YXJ0IG1lIHVwXG4gICAgc3RhcnR1cDogZnVuY3Rpb24gc3RhcnR1cCgpIHtcbiAgICAgIHRoaXMuc2lkZVBhbmVsLnN0YXJ0dXAoKTtcbiAgICAgIHRoaXMuYmFzZW1hcFRvZ2dsZS5zdGFydHVwKCk7XG4gICAgfVxuICB9KTtcblxuICAvLyBpbml0aWFsaXplIGFwcCB0byBnbG9iYWwgdmFyIGZvciBkZWJ1Z2dpbmdcbiAgd2luZG93LmFwcCA9IG5ldyBBcHAoe30sICdhcHAnKTtcbiAgd2luZG93LmFwcC5zdGFydHVwKCk7XG5cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
