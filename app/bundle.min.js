define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin","esri/Map","esri/views/MapView","esri/layers/FeatureLayer","esri/widgets/BasemapToggle","esri/widgets/BasemapToggle/BasemapToggleViewModel","dojo/i18n!./nls/strings"],function(e,a,t,n,i,s,l,o,p){function d(e){return e.replace?e.replace(/-|_/g," "):e}e="default"in e?e["default"]:e,a="default"in a?a["default"]:a,t="default"in t?t["default"]:t,n="default"in n?n["default"]:n,i="default"in i?i["default"]:i,s="default"in s?s["default"]:s,l="default"in l?l["default"]:l,o="default"in o?o["default"]:o,p="default"in p?p["default"]:p;var r={mapProps:{center:[-122.33,37.75],zoom:11,basemap:"dark-gray"},secondaryBasemap:"streets",fuelingStationLayerProps:{url:"https://services.arcgis.com/rOo16HdIMeOBI4Mb/arcgis/rest/services/Alternative_Fueling_Stations/FeatureServer/0",popupTemplate:{title:"{Station_Na}",content:'\n        <p>{Street_Add}<br>\n        {City}, {State}, {ZIP}</p>\n\n        <p><b>Fuel Type:</b> {Fuel_Type}</p>\n        <p><b>Phone:</b> <a href="tel:{Station_Ph}">{Station_Ph}</a></p>\n        <p><b>Open to:</b> {Groups_Wit}</p>\n        <p><b>Hours:</b> {Access_Day}</p>'},outFields:["Station_Na","Street_Add","City","State","ZIP","Fuel_Type","Station_Ph","Groups_Wit","Access_Day"]}},c=e([],{init:function(e){this.map=new n({basemap:e.basemap}),delete e.basemap,e.map=this.map,this.view=new i(e)},createBasemapToggle:function(e,a){return e&&a&&this.view?new l({viewModel:new o({view:this.view,secondaryBasemap:a})},e):void 0},addFeatureLayer:function(e){if(this.map){var a=new s(e);return this.map.add(a),a}}});if(!u)var u=new c;var g='<div class="panel panel-default">\r\n  <div class="panel-heading">\r\n    <h4 class="panel-title">\r\n      <span class="glyphicon glyphicon-chevron-up"></span>\r\n      <a role="button" data-toggle="collapse" data-dojo-attach-point="titleNode" data-target=".info-panel" aria-expanded="false" aria-controls="collapseOne"></a>\r\n    </h4>\r\n  </div>\r\n  <div class="panel-collapse collapse in info-panel" role="tabpanel">\r\n    <div class="panel-body">\r\n      <h4>${nls.About}</h4>\r\n      <p>${nls.sidePanelMessage}</p>\r\n    </div>\r\n  </div>\r\n</div>\r\n',h=e([a,t],{baseClass:"side-panel",nls:p,templateString:g,_setTitleAttr:{node:"titleNode",type:"innerHTML"},postCreate:function(){var e="#"+this.domNode.id;$(e+" .collapse").on("hide.bs.collapse show.bs.collapse",function(){$(e+" .panel-title .glyphicon").toggleClass("glyphicon-chevron-up glyphicon-chevron-down")})}}),f=e([a,t],{baseClass:"app",templateString:'\n    <div>\n      <div data-dojo-attach-point="mapNode" class="map-container">\n        <div data-dojo-attach-point="sidePanelNode"></div>\n        <div data-dojo-attach-point="basemapToggleNode" class="basemap-toggle" />\n      </div>\n    </div>\n  ',postCreate:function(){var e=this;this.inherited(arguments),r.mapProps.container=this.mapNode,u.init(r.mapProps),this.sidePanel=new h({},this.sidePanelNode),this.basemapToggle=u.createBasemapToggle(this.basemapToggleNode,r.secondaryBasemap),u.addFeatureLayer(r.fuelingStationLayerProps).then(function(a){e.sidePanel.set("title",d(a.title||a.name))})},startup:function(){this.sidePanel.startup(),this.basemapToggle.startup()}});window.app=new f({},"app"),window.app.startup()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyJdLCJuYW1lcyI6WyJkZWZpbmUiLCJkZWNsYXJlIiwiX1dpZGdldEJhc2UiLCJfVGVtcGxhdGVkTWl4aW4iLCJNYXAiLCJNYXBWaWV3IiwiRmVhdHVyZUxheWVyIiwiQmFzZW1hcFRvZ2dsZSIsIkJhc2VtYXBUb2dnbGVWTSIsInN0cmluZ3MiLCJmb3JtYXRUaXRsZSIsInRpdGxlIiwicmVwbGFjZSIsImNvbmZpZyIsIm1hcFByb3BzIiwiY2VudGVyIiwiem9vbSIsImJhc2VtYXAiLCJzZWNvbmRhcnlCYXNlbWFwIiwiZnVlbGluZ1N0YXRpb25MYXllclByb3BzIiwidXJsIiwicG9wdXBUZW1wbGF0ZSIsImNvbnRlbnQiLCJvdXRGaWVsZHMiLCJNYXBTZXJ2aWNlIiwiaW5pdCIsIm9wdGlvbnMiLCJ0aGlzIiwibWFwIiwidmlldyIsImNyZWF0ZUJhc2VtYXBUb2dnbGUiLCJub2RlIiwidmlld01vZGVsIiwiYWRkRmVhdHVyZUxheWVyIiwicHJvcHMiLCJmZWF0dXJlTGF5ZXIiLCJhZGQiLCJfaW5zdGFuY2UiLCJ0ZW1wbGF0ZSIsIlNpZGVQYW5lbCIsImJhc2VDbGFzcyIsIm5scyIsInRlbXBsYXRlU3RyaW5nIiwiX3NldFRpdGxlQXR0ciIsInR5cGUiLCJwb3N0Q3JlYXRlIiwiZG9tTm9kZUlkIiwiZG9tTm9kZSIsImlkIiwiJCIsIm9uIiwidG9nZ2xlQ2xhc3MiLCJBcHAiLCJfdGhpcyIsImluaGVyaXRlZCIsImFyZ3VtZW50cyIsImNvbnRhaW5lciIsIm1hcE5vZGUiLCJzaWRlUGFuZWwiLCJzaWRlUGFuZWxOb2RlIiwiYmFzZW1hcFRvZ2dsZSIsImJhc2VtYXBUb2dnbGVOb2RlIiwidGhlbiIsImxheWVyIiwic2V0IiwibmFtZSIsInN0YXJ0dXAiLCJ3aW5kb3ciLCJhcHAiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUFRLHFCQUFzQixvQkFBcUIsd0JBQXlCLFdBQVkscUJBQXNCLDJCQUE0Qiw2QkFBOEIsb0RBQXFELDJCQUE0QixTQUFV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LCAnZGlqaXQvX1dpZGdldEJhc2UnLCAnZGlqaXQvX1RlbXBsYXRlZE1peGluJywgJ2VzcmkvTWFwJywgJ2Vzcmkvdmlld3MvTWFwVmlldycsICdlc3JpL2xheWVycy9GZWF0dXJlTGF5ZXInLCAnZXNyaS93aWRnZXRzL0Jhc2VtYXBUb2dnbGUnLCAnZXNyaS93aWRnZXRzL0Jhc2VtYXBUb2dnbGUvQmFzZW1hcFRvZ2dsZVZpZXdNb2RlbCcsICdkb2pvL2kxOG4hLi9ubHMvc3RyaW5ncyddLCBmdW5jdGlvbiAoZGVjbGFyZSwgX1dpZGdldEJhc2UsIF9UZW1wbGF0ZWRNaXhpbiwgTWFwLCBNYXBWaWV3LCBGZWF0dXJlTGF5ZXIsIEJhc2VtYXBUb2dnbGUsIEJhc2VtYXBUb2dnbGVWTSwgc3RyaW5ncykgeyBcblxuICBkZWNsYXJlID0gJ2RlZmF1bHQnIGluIGRlY2xhcmUgPyBkZWNsYXJlWydkZWZhdWx0J10gOiBkZWNsYXJlO1xuICBfV2lkZ2V0QmFzZSA9ICdkZWZhdWx0JyBpbiBfV2lkZ2V0QmFzZSA/IF9XaWRnZXRCYXNlWydkZWZhdWx0J10gOiBfV2lkZ2V0QmFzZTtcbiAgX1RlbXBsYXRlZE1peGluID0gJ2RlZmF1bHQnIGluIF9UZW1wbGF0ZWRNaXhpbiA/IF9UZW1wbGF0ZWRNaXhpblsnZGVmYXVsdCddIDogX1RlbXBsYXRlZE1peGluO1xuICBNYXAgPSAnZGVmYXVsdCcgaW4gTWFwID8gTWFwWydkZWZhdWx0J10gOiBNYXA7XG4gIE1hcFZpZXcgPSAnZGVmYXVsdCcgaW4gTWFwVmlldyA/IE1hcFZpZXdbJ2RlZmF1bHQnXSA6IE1hcFZpZXc7XG4gIEZlYXR1cmVMYXllciA9ICdkZWZhdWx0JyBpbiBGZWF0dXJlTGF5ZXIgPyBGZWF0dXJlTGF5ZXJbJ2RlZmF1bHQnXSA6IEZlYXR1cmVMYXllcjtcbiAgQmFzZW1hcFRvZ2dsZSA9ICdkZWZhdWx0JyBpbiBCYXNlbWFwVG9nZ2xlID8gQmFzZW1hcFRvZ2dsZVsnZGVmYXVsdCddIDogQmFzZW1hcFRvZ2dsZTtcbiAgQmFzZW1hcFRvZ2dsZVZNID0gJ2RlZmF1bHQnIGluIEJhc2VtYXBUb2dnbGVWTSA/IEJhc2VtYXBUb2dnbGVWTVsnZGVmYXVsdCddIDogQmFzZW1hcFRvZ2dsZVZNO1xuICBzdHJpbmdzID0gJ2RlZmF1bHQnIGluIHN0cmluZ3MgPyBzdHJpbmdzWydkZWZhdWx0J10gOiBzdHJpbmdzO1xuXG4gIHZhciBjb25maWcgPSB7XG4gICAgbWFwUHJvcHM6IHtcbiAgICAgIGNlbnRlcjogWy0xMjIuMzMsIDM3Ljc1XSxcbiAgICAgIHpvb206IDExLFxuICAgICAgYmFzZW1hcDogJ2RhcmstZ3JheSdcbiAgICB9LFxuICAgIHNlY29uZGFyeUJhc2VtYXA6ICdzdHJlZXRzJyxcbiAgICBmdWVsaW5nU3RhdGlvbkxheWVyUHJvcHM6IHtcbiAgICAgIHVybDogJ2h0dHBzOi8vc2VydmljZXMuYXJjZ2lzLmNvbS9yT28xNkhkSU1lT0JJNE1iL2FyY2dpcy9yZXN0L3NlcnZpY2VzL0FsdGVybmF0aXZlX0Z1ZWxpbmdfU3RhdGlvbnMvRmVhdHVyZVNlcnZlci8wJyxcbiAgICAgIHBvcHVwVGVtcGxhdGU6IHtcbiAgICAgICAgdGl0bGU6ICd7U3RhdGlvbl9OYX0nLFxuICAgICAgICBjb250ZW50OiAnXFxuICAgICAgICA8cD57U3RyZWV0X0FkZH08YnI+XFxuICAgICAgICB7Q2l0eX0sIHtTdGF0ZX0sIHtaSVB9PC9wPlxcblxcbiAgICAgICAgPHA+PGI+RnVlbCBUeXBlOjwvYj4ge0Z1ZWxfVHlwZX08L3A+XFxuICAgICAgICA8cD48Yj5QaG9uZTo8L2I+IDxhIGhyZWY9XCJ0ZWw6e1N0YXRpb25fUGh9XCI+e1N0YXRpb25fUGh9PC9hPjwvcD5cXG4gICAgICAgIDxwPjxiPk9wZW4gdG86PC9iPiB7R3JvdXBzX1dpdH08L3A+XFxuICAgICAgICA8cD48Yj5Ib3Vyczo8L2I+IHtBY2Nlc3NfRGF5fTwvcD4nXG4gICAgICB9LFxuICAgICAgb3V0RmllbGRzOiBbJ1N0YXRpb25fTmEnLCAnU3RyZWV0X0FkZCcsICdDaXR5JywgJ1N0YXRlJywgJ1pJUCcsICdGdWVsX1R5cGUnLCAnU3RhdGlvbl9QaCcsICdHcm91cHNfV2l0JywgJ0FjY2Vzc19EYXknXVxuICAgIH1cbiAgfTtcblxuICAvLyBkZWZpbmUgYSBzdGF0ZWZ1bCBzZXJ2aWNlIHRvIG1hbmFnZSB0aGUgbWFwXG4gIHZhciBNYXBTZXJ2aWNlID0gZGVjbGFyZShbXSwge1xuICAgIC8vIGNyZWF0ZSBhIG1hcCBhbmQgbWFwIHZpZXdcbiAgICBpbml0OiBmdW5jdGlvbiBpbml0KG9wdGlvbnMpIHtcbiAgICAgIHRoaXMubWFwID0gbmV3IE1hcCh7XG4gICAgICAgIGJhc2VtYXA6IG9wdGlvbnMuYmFzZW1hcFxuICAgICAgfSk7XG4gICAgICBkZWxldGUgb3B0aW9ucy5iYXNlbWFwO1xuICAgICAgb3B0aW9ucy5tYXAgPSB0aGlzLm1hcDtcbiAgICAgIHRoaXMudmlldyA9IG5ldyBNYXBWaWV3KG9wdGlvbnMpO1xuICAgIH0sXG5cbiAgICBjcmVhdGVCYXNlbWFwVG9nZ2xlOiBmdW5jdGlvbiBjcmVhdGVCYXNlbWFwVG9nZ2xlKG5vZGUsIHNlY29uZGFyeUJhc2VtYXApIHtcbiAgICAgIGlmICghbm9kZSB8fCAhc2Vjb25kYXJ5QmFzZW1hcCB8fCAhdGhpcy52aWV3KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCYXNlbWFwVG9nZ2xlKHtcbiAgICAgICAgLy8gU2V0dGluZyB3aWRnZXQgcHJvcGVydGllcyB2aWEgdmlld01vZGVsIGlzIHN1YmplY3QgdG9cbiAgICAgICAgLy8gY2hhbmdlIGZvciB0aGUgNC4wIGZpbmFsIHJlbGVhc2VcbiAgICAgICAgdmlld01vZGVsOiBuZXcgQmFzZW1hcFRvZ2dsZVZNKHtcbiAgICAgICAgICB2aWV3OiB0aGlzLnZpZXcsXG4gICAgICAgICAgc2Vjb25kYXJ5QmFzZW1hcDogc2Vjb25kYXJ5QmFzZW1hcFxuICAgICAgICB9KVxuICAgICAgfSwgbm9kZSk7XG4gICAgfSxcblxuXG4gICAgLy8gYWRkIGEgZmVhdHVyZSBsYXllciB0byB0aGUgbWFwXG4gICAgYWRkRmVhdHVyZUxheWVyOiBmdW5jdGlvbiBhZGRGZWF0dXJlTGF5ZXIocHJvcHMpIHtcbiAgICAgIGlmICghdGhpcy5tYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgZmVhdHVyZUxheWVyID0gbmV3IEZlYXR1cmVMYXllcihwcm9wcyk7XG4gICAgICB0aGlzLm1hcC5hZGQoZmVhdHVyZUxheWVyKTtcbiAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXI7XG4gICAgfVxuICB9KTtcblxuICAvLyByZXR1cm4gYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgdGhpcyBzZXJ2aWNlXG4gIGlmICghX2luc3RhbmNlKSB7XG4gICAgdmFyIF9pbnN0YW5jZSA9IG5ldyBNYXBTZXJ2aWNlKCk7XG4gIH1cblxuICB2YXIgdGVtcGxhdGUgPSBcIjxkaXYgY2xhc3M9XFxcInBhbmVsIHBhbmVsLWRlZmF1bHRcXFwiPlxcclxcbiAgPGRpdiBjbGFzcz1cXFwicGFuZWwtaGVhZGluZ1xcXCI+XFxyXFxuICAgIDxoNCBjbGFzcz1cXFwicGFuZWwtdGl0bGVcXFwiPlxcclxcbiAgICAgIDxzcGFuIGNsYXNzPVxcXCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcXFwiPjwvc3Bhbj5cXHJcXG4gICAgICA8YSByb2xlPVxcXCJidXR0b25cXFwiIGRhdGEtdG9nZ2xlPVxcXCJjb2xsYXBzZVxcXCIgZGF0YS1kb2pvLWF0dGFjaC1wb2ludD1cXFwidGl0bGVOb2RlXFxcIiBkYXRhLXRhcmdldD1cXFwiLmluZm8tcGFuZWxcXFwiIGFyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIiBhcmlhLWNvbnRyb2xzPVxcXCJjb2xsYXBzZU9uZVxcXCI+PC9hPlxcclxcbiAgICA8L2g0PlxcclxcbiAgPC9kaXY+XFxyXFxuICA8ZGl2IGNsYXNzPVxcXCJwYW5lbC1jb2xsYXBzZSBjb2xsYXBzZSBpbiBpbmZvLXBhbmVsXFxcIiByb2xlPVxcXCJ0YWJwYW5lbFxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcInBhbmVsLWJvZHlcXFwiPlxcclxcbiAgICAgIDxoND4ke25scy5BYm91dH08L2g0PlxcclxcbiAgICAgIDxwPiR7bmxzLnNpZGVQYW5lbE1lc3NhZ2V9PC9wPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xuXG4gIHZhciBTaWRlUGFuZWwgPSBkZWNsYXJlKFtfV2lkZ2V0QmFzZSwgX1RlbXBsYXRlZE1peGluXSwge1xuXG4gICAgYmFzZUNsYXNzOiAnc2lkZS1wYW5lbCcsXG4gICAgbmxzOiBzdHJpbmdzLFxuICAgIHRlbXBsYXRlU3RyaW5nOiB0ZW1wbGF0ZSxcblxuICAgIC8vIHNldCBwYW5lbCBoZWFkZXIgdGl0bGVcbiAgICBfc2V0VGl0bGVBdHRyOiB7IG5vZGU6ICd0aXRsZU5vZGUnLCB0eXBlOiAnaW5uZXJIVE1MJyB9LFxuXG4gICAgLy8gd2lyZSB1cCBldmVudHNcbiAgICBwb3N0Q3JlYXRlOiBmdW5jdGlvbiBwb3N0Q3JlYXRlKCkge1xuICAgICAgdmFyIGRvbU5vZGVJZCA9ICcjJyArIHRoaXMuZG9tTm9kZS5pZDtcbiAgICAgIC8vIHVwZGF0ZSBjaGV2cm9uIGljb24gd2hlbiBwYW5lbCBjb2xsYXBzZXMvZXhwYW5kc1xuICAgICAgJChkb21Ob2RlSWQgKyAnIC5jb2xsYXBzZScpLm9uKCdoaWRlLmJzLmNvbGxhcHNlIHNob3cuYnMuY29sbGFwc2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9tTm9kZUlkICsgJyAucGFuZWwtdGl0bGUgLmdseXBoaWNvbicpLnRvZ2dsZUNsYXNzKCdnbHlwaGljb24tY2hldnJvbi11cCBnbHlwaGljb24tY2hldnJvbi1kb3duJyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHBsYWNlIHN0YXRlbGVzcyB1dGlsaXR5IGZ1bmN0aW9ucyBpbiB0aGlzIGZpbGVcbiAgLy8gdGhleSBjYW4gYmUgaW1wb3J0ZWQgaW50byBvdGhlciBmaWxlcyBhcyBuZWVkZWRcbiAgZnVuY3Rpb24gZm9ybWF0VGl0bGUodGl0bGUpIHtcbiAgICBpZiAoIXRpdGxlLnJlcGxhY2UpIHtcbiAgICAgIC8vIG5vdCBhIHN0cmluZywganVzdCByZXR1cm5cbiAgICAgIHJldHVybiB0aXRsZTtcbiAgICB9XG5cbiAgICAvLyByZXBsYWNlIGRhc2hlcyBhbmQgdW5kZXJzY29yZXMgdy8gc3BhY2VzXG4gICAgcmV0dXJuIHRpdGxlLnJlcGxhY2UoLy18Xy9nLCAnICcpO1xuICB9XG5cbiAgdmFyIEFwcCA9IGRlY2xhcmUoW19XaWRnZXRCYXNlLCBfVGVtcGxhdGVkTWl4aW5dLCB7XG5cbiAgICBiYXNlQ2xhc3M6ICdhcHAnLFxuICAgIC8vIHVzaW5nIGFuIGlubGluZSB0ZW1wbGF0ZVxuICAgIHRlbXBsYXRlU3RyaW5nOiAnXFxuICAgIDxkaXY+XFxuICAgICAgPGRpdiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwibWFwTm9kZVwiIGNsYXNzPVwibWFwLWNvbnRhaW5lclwiPlxcbiAgICAgICAgPGRpdiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwic2lkZVBhbmVsTm9kZVwiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBkYXRhLWRvam8tYXR0YWNoLXBvaW50PVwiYmFzZW1hcFRvZ2dsZU5vZGVcIiBjbGFzcz1cImJhc2VtYXAtdG9nZ2xlXCIgLz5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAnLFxuXG4gICAgLy8ga2ljayBvZmYgYXBwIG9uY2UgdGhpcyBjb21wb25lbnQgaGFzIGJlZW4gY3JlYXRlZFxuICAgIHBvc3RDcmVhdGU6IGZ1bmN0aW9uIHBvc3RDcmVhdGUoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB0aGlzLmluaGVyaXRlZChhcmd1bWVudHMpO1xuXG4gICAgICAvLyBpbml0aWFsaXplIG1hcFxuICAgICAgY29uZmlnLm1hcFByb3BzLmNvbnRhaW5lciA9IHRoaXMubWFwTm9kZTtcbiAgICAgIF9pbnN0YW5jZS5pbml0KGNvbmZpZy5tYXBQcm9wcyk7XG5cbiAgICAgIC8vIGluaXRpYWxpemUgc2lkZSBwYW5lbFxuICAgICAgdGhpcy5zaWRlUGFuZWwgPSBuZXcgU2lkZVBhbmVsKHt9LCB0aGlzLnNpZGVQYW5lbE5vZGUpO1xuXG4gICAgICAvLyBpbml0aWFsaXplIHRoZSBiYXNlbWFwIHRvZ2dsZVxuICAgICAgdGhpcy5iYXNlbWFwVG9nZ2xlID0gX2luc3RhbmNlLmNyZWF0ZUJhc2VtYXBUb2dnbGUodGhpcy5iYXNlbWFwVG9nZ2xlTm9kZSwgY29uZmlnLnNlY29uZGFyeUJhc2VtYXApO1xuXG4gICAgICAvLyBhZGQgZmVhdHVyZSBsYXllciBhbmQgb25jZSBsb2FkZWRcbiAgICAgIC8vIHNldCBzaWRlIHRpdGxlIG9mIHNpZGUgcGFuZWxcbiAgICAgIF9pbnN0YW5jZS5hZGRGZWF0dXJlTGF5ZXIoY29uZmlnLmZ1ZWxpbmdTdGF0aW9uTGF5ZXJQcm9wcykudGhlbihmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgX3RoaXMuc2lkZVBhbmVsLnNldCgndGl0bGUnLCBmb3JtYXRUaXRsZShsYXllci50aXRsZSB8fCBsYXllci5uYW1lKSk7XG4gICAgICB9KTtcbiAgICB9LFxuXG5cbiAgICAvLyB5b3UgZ290dGEgc3RhcnQgbWUgdXBcbiAgICBzdGFydHVwOiBmdW5jdGlvbiBzdGFydHVwKCkge1xuICAgICAgdGhpcy5zaWRlUGFuZWwuc3RhcnR1cCgpO1xuICAgICAgdGhpcy5iYXNlbWFwVG9nZ2xlLnN0YXJ0dXAoKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGluaXRpYWxpemUgYXBwIHRvIGdsb2JhbCB2YXIgZm9yIGRlYnVnZ2luZ1xuICB3aW5kb3cuYXBwID0gbmV3IEFwcCh7fSwgJ2FwcCcpO1xuICB3aW5kb3cuYXBwLnN0YXJ0dXAoKTtcblxufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
